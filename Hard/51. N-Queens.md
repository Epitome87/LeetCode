# [51. N-Queens](https://leetcode.com/problems/n-queens)

## Description

The **n-queens** puzzle is the problem of placing `n` queens on an `n x n` chessboard such that no two queens attack each other.

Given an integer `n`, return _all distinct solutions to the **n-queens puzzle**_. You may return the answer in **any order**.

Each solution contains a distinct board configuration of the n-queens' placement, where `'Q'` and `'.'` both indicate a queen and an empty space, respectively.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/11/13/queens.jpg)

**Input:** n = 4  
**Output:** \[\[".Q..","...Q","Q...","..Q."\],\["..Q.","Q...","...Q",".Q.."\]\]  
**Explanation:** There exist two distinct solutions to the 4-queens puzzle as shown above

**Example 2:**

**Input:** n = 1  
**Output:** \[\["Q"\]\]

**Constraints:**

- `1 <= n <= 9`

## My Solution

**JavaScript**

```js
// Approach: For each level in this decision tree, we are picking the i-th Queen
// We select Queens to go from row 0 to row n - 1. By selecting them this way, we ensure
// they are never under attack by another Queen in the same row.
const solveNQueens = (n) => {
  const result = [];
  const board = Array.from({ length: n }, () => Array(n).fill('.'));

  const isSafe = (row, col) => {
    // Check the column above us, i.e check the board from this location upward
    for (let r = 0; r < row; ++r) {
      if (board[r][col] === 'Q') return false;
    }

    // Check the up-left diagonal
    for (let i = 1; i <= Math.min(row, col); ++i) {
      if (board[row - i][col - i] === 'Q') return false;
    }

    // Check the up-right diagonal
    for (let i = 1; i <= Math.min(row, n - 1 - col); ++i) {
      if (board[row - i][col + i] === 'Q') return false;
    }

    return true;
  };

  const backtrack = (row) => {
    if (row === n) {
      // Output wants each row as a singular string
      result.push(board.map((r) => r.join('')));
      return;
    }

    for (let col = 0; col < n; ++col) {
      if (isSafe(row, col)) {
        // Proceed with Queen in this row / column combination
        board[row][col] = 'Q';
        backtrack(row + 1);

        // Backtrack by removing the Queen from this row / column
        board[row][col] = '.';
      }
    }
  };

  backtrack(0);
  return result;
};
```

| Time Complexity | Space Complexity |
| --------------- | ---------------- |
| O(N!)           | O(N^2)           |
